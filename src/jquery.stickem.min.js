!function(a,b){var e=function(c,d){this.elem=c,this.$elem=a(c),this.options=d,this.metadata=this.$elem.data("stickem-options"),this.$win=a(b)};e.prototype={defaults:{item:".stickem",container:".stickem-container",stickClass:"stickit",endStickClass:"stickit-end",offset:0,start:0,onStick:null,onUnstick:null},init:function(){var b=this;return b.config=a.extend({},b.defaults,b.options,b.metadata),b.setWindowHeight(),b.getItems(),b.bindEvents(),b},bindEvents:function(){var b=this;b.$win.on("scroll.stickem",a.proxy(b.handleScroll,b)),b.$win.on("resize.stickem",a.proxy(b.handleResize,b))},destroy:function(){var a=this;a.$win.off("scroll.stickem"),a.$win.off("resize.stickem")},getItem:function(b,c){var d=this,e=a(c),f={$elem:e,elemHeight:e.height(),$container:e.parents(d.config.container),isStuck:!1};d.windowHeight>f.elemHeight?(f.containerHeight=f.$container.outerHeight(),f.containerInner={border:{bottom:parseInt(f.$container.css("border-bottom"),10)||0,top:parseInt(f.$container.css("border-top"),10)||0},padding:{bottom:parseInt(f.$container.css("padding-bottom"),10)||0,top:parseInt(f.$container.css("padding-top"),10)||0}},f.containerInnerHeight=f.$container.height(),f.containerStart=f.$container.offset().top-d.config.offset+d.config.start+f.containerInner.padding.top+f.containerInner.border.top,f.scrollFinish=f.containerStart-d.config.start+(f.containerInnerHeight-f.elemHeight),f.containerInnerHeight>f.elemHeight&&d.items.push(f)):f.$elem.removeClass(d.config.stickClass+" "+d.config.endStickClass)},getItems:function(){var b=this;b.items=[],b.$elem.find(b.config.item).each(a.proxy(b.getItem,b))},handleResize:function(){var a=this;a.getItems(),a.setWindowHeight()},handleScroll:function(){var a=this;if(a.items.length>0)for(var b=a.$win.scrollTop(),c=0,d=a.items.length;d>c;c++){var e=a.items[c];e.isStuck&&(b<e.containerStart||b>e.scrollFinish)?(e.$elem.removeClass(a.config.stickClass),b>e.scrollFinish&&e.$elem.addClass(a.config.endStickClass),e.isStuck=!1,a.config.onUnstick&&a.config.onUnstick(e)):e.isStuck===!1&&b>e.containerStart&&b<e.scrollFinish&&(e.$elem.removeClass(a.config.endStickClass).addClass(a.config.stickClass),e.isStuck=!0,a.config.onStick&&a.config.onStick(e))}},setWindowHeight:function(){var a=this;a.windowHeight=a.$win.height()-a.config.offset}},e.defaults=e.prototype.defaults,a.fn.stickem=function(a){return this.destroy=function(){this.each(function(){new e(this,a).destroy()})},this.each(function(){new e(this,a).init()})}}(jQuery,window,document);